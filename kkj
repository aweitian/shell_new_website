<?phpif (count($argv) !== 2 ){	print "php kkj www.aaa.com|m.aaa.com\n--not start with www,auto prepend it.\n";	exit;}$ip = "101.81.237.132";$port = 50022;$repository_dir = "/repository";$web_root_dir = "/webroot/www";$sync_dir = "/home/git/sync";$nginx_hosts_dir = "/etc/nginx/conf.d";$domain = $argv[1];$d = explode( "." ,  $domain);if (count($d) == 2){	$host = "www." . $domain . " " . $domain;	}else if(count($d) == 3){	$host = $domain;	}else{	print "invalid domain\n";	exit;	}$root = $web_root_dir . '/' . $domain;$public_dir = $root . '/public';$exe = str_replace('.','-',$domain);// var_dump(array(// 	"{{repository_dir}}" => $repository_dir,// 	"{{web_root_dir}}" => $web_root_dir,// 	"{{sync_dir}}" => $sync_dir,// 	"{{nginx_hosts_dir}}" => $nginx_hosts_dir,// 	"{{root}}" => $root,//     "{{host}}" => $host,// 	"{{exe}}" => $exe,// 	"{{ip}}" => $ip,// 	"{{port}}" => $port,//  "{{domain}}" => $domain,//  "{{public_dir}}" => $public_dir,// ));exit;$config = file_get_contents("kkj.tpl");$config = strtr($config,array(	"{{repository_dir}}" => $repository_dir,	"{{web_root_dir}}" => $web_root_dir,	"{{sync_dir}}" => $sync_dir,	"{{nginx_hosts_dir}}" => $nginx_hosts_dir,	"{{root}}" => $root,    "{{host}}" => $host,	"{{exe}}" => $exe,	"{{ip}}" => $ip,	"{{port}}" => $port,	"{{domain}}" => $domain,	"{{public_dir}}" => $public_dir,));$sync = file_get_contents("sync.tpl");$sync = strtr($sync,array(	"{{repository_dir}}" => $repository_dir,	"{{web_root_dir}}" => $web_root_dir,	"{{sync_dir}}" => $sync_dir,	"{{nginx_hosts_dir}}" => $nginx_hosts_dir,    "{{root}}" => $root,    "{{host}}" => $host,    "{{exe}}" => $exe,    "{{ip}}" => $ip,    "{{port}}" => $port,    "{{domain}}" => $domain,    "{{public_dir}}" => $public_dir,));$cmd = file_get_contents("cmd.tpl");$cmd = strtr($cmd,array(	"{{repository_dir}}" => $repository_dir,	"{{web_root_dir}}" => $web_root_dir,	"{{sync_dir}}" => $sync_dir,	"{{nginx_hosts_dir}}" => $nginx_hosts_dir,    "{{root}}" => $root,    "{{host}}" => $host,    "{{exe}}" => $exe,    "{{ip}}" => $ip,    "{{port}}" => $port,    "{{domain}}" => $domain,    "{{public_dir}}" => $public_dir,));if (!is_dir($sync_dir)){	mkdir($sync_dir);}file_put_contents("$sync_dir/$exe",$sync);file_put_contents("$nginx_hosts_dir/$domain.conf",$config);echo "cat $nginx_hosts_dir/$domain.conf\n";file_put_contents("/root/tmp_cmd_git",$cmd);system("chmod +x /root/tmp_cmd_git");echo "/root/tmp_cmd_git\n";